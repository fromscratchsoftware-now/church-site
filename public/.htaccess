<IfModule mod_rewrite.c>
  RewriteEngine On

  # SiteGround target path is https://church.fromscratchsoftware.net/1
  RewriteBase /1/

  # Let PHP endpoints execute normally
  RewriteRule ^api/ - [L]
  # Let admin pages execute normally
  RewriteRule ^admin/ - [L]

  # Serve existing files/directories as-is
  RewriteCond %{REQUEST_FILENAME} -f [OR]
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule ^ - [L]

  # SPA fallback
  RewriteRule . /1/index.html [L]
</IfModule>

# Prevent SiteGround/nginx proxy from caching SPA entry HTML (avoids stale asset hashes).
<IfModule mod_headers.c>
  <FilesMatch "^index\\.html$">
    Header set Cache-Control "no-store, no-cache, must-revalidate, max-age=0"
    Header set Pragma "no-cache"
    Header set Expires "0"
  </FilesMatch>
</IfModule>
